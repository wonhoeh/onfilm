<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ë°°ìš° ìƒì„¸ í˜ì´ì§€</title>

    <style>
        :root{
            --bg:#0b0c0f;
            --panel:#12131a;
            --panel-2:#161824;
            --text:#e7e8ee;
            --muted:#9aa0ad;
            --line:rgba(255,255,255,.08);
            --accent:#7c5cff;
            --accent-2:#24d39a;
            --radius-lg:14px;
            --radius-md:10px;
            --radius-xl:20px;
            --shadow:0 10px 40px rgba(0,0,0,.5);
        }

        *{box-sizing:border-box;}
        body{
            margin:0;
            font-family:system-ui,-apple-system,"Noto Sans KR",sans-serif;
            color:var(--text);
            background:
                    radial-gradient(900px 400px at 80% 0%, rgba(124,92,255,.2), transparent 60%),
                    radial-gradient(700px 350px at 10% 10%, rgba(36,211,154,.15), transparent 60%),
                    var(--bg);
        }
        .container{width:min(1100px,92vw); margin:0 auto;}

        /* HEADER */
        header{
            position:sticky; top:0; z-index:10;
            background:rgba(11,12,15,.85);
            backdrop-filter:blur(8px);
            border-bottom:1px solid var(--line);
        }

        nav ul{
            display:flex; list-style:none; gap:18px;
            padding:0; margin:0;
            font-weight:600; color:var(--muted);
        }
        nav li.active{ color:var(--text); font-weight:700; }


        /* PROFILE SECTION */
        .profile-header{
            margin:30px 0 20px;
            display:flex; gap:28px; align-items:center;
        }
        .profile-photo{
            width:220px; height:300px; border-radius:var(--radius-lg);
            object-fit:cover; border:1px solid var(--line);
            box-shadow:var(--shadow);
        }
        .profile-info h1{
            font-size:34px;
            font-weight:900;
            margin:0 0 10px;
        }
        .profile-info .meta{
            font-size:14px;
            color:var(--muted);
            margin-bottom:8px;
            /*line-height:1.6;*/
        }
        .bio{
            /*font-size:15px;*/
            /*color:var(--muted);*/
            /*line-height:1.7;*/
            /*max-width:70ch;*/
            font-size: 14px;
            color: var(--muted);
            line-height: 1.6;
        }


        /* ============================
           FILMOGRAPHY (ìŠ¬ë¼ì´ë” + ì¹´ë“œ)
        ============================ */
        .filmography-section h2{
            font-size:22px; font-weight:900; margin:40px 0 14px;
        }

        .film-slider-container{
            position:relative;
            margin-top:20px;
        }

        .film-slider-wrapper{
            position: relative;
            overflow:hidden;
        }

        .film-slider{
            display:flex;
            gap:20px;
            transition:transform .4s ease;
        }

        /* ì¹´ë“œ í­ ê³ ì •: 1ê°œ/2ê°œ/3ê°œì—¬ë„ í•­ìƒ 32% */
        .film-card{
            flex: 0 0 32%;
            max-width: 32%;
            background:var(--panel);
            border:1px solid var(--line);
            border-radius:var(--radius-lg);
            overflow:hidden;
            cursor:pointer;
            transition:.15s;
        }
        .film-card:hover{
            transform:scale(1.015);
            border-color:var(--accent);
        }

        .film-poster{
            width:100%;
            aspect-ratio:16/9;
            object-fit:cover;
        }
        .film-body{ padding:12px; }
        .film-title{ font-size:16px; font-weight:900; }
        .film-meta{ margin-top:6px; font-size:13px; color:var(--muted); }

        /* í™”ì‚´í‘œ */
        .film-arrow{
            position:absolute;
            top:50%;
            transform:translateY(-50%);
            border:none;
            background:transparent;
            color:white;
            font-size:48px;
            font-weight:300;
            cursor:pointer;
            display: none;
            transition:opacity .3s ease;
            z-index:10;
            padding:0 8px;
        }
        .film-slider-container:hover .film-arrow{
            opacity:1;
        }
        .film-arrow.left{ left:-100px; }
        .film-arrow.right{ right:-100px; }
        .film-arrow:hover{
            color:var(--accent);
            transform:translateY(-50%) scale(1.1);
        }


        /* ============================
           MOVIE POPUP
        ============================ */
        .movie-popup {
            position: fixed;
            z-index: 999;
            background: var(--panel-2);
            border-radius: 14px;
            border: 1px solid var(--line);
            box-shadow: 0 25px 70px rgba(0,0,0,.85);
            overflow: hidden;

            opacity: 0;
            pointer-events: none;

            transition:
                    opacity .22s ease-out,
                    transform .25s cubic-bezier(.24,.82,.24,1.4),
                    width .25s ease,
                    height .25s ease,
                    top .25s ease,
                    left .25s ease;
        }

        .movie-popup.show{
            opacity:1;
            pointer-events:auto;
            transform:scale(1) translateY(0);
            filter:brightness(1);
        }

        .popup-video-box {
            position: relative;
            width: 100%;
            height: 62%;
            background: black;
            overflow: hidden;
        }
        .popup-video-box video{
            width:100%;
            height:100%;
            object-fit:cover;
        }

        .popup-info{
            padding: 14px 16px;
        }
        .popup-title{
            font-size:20px;
            font-weight:900;
            margin-bottom:6px;
            line-height: 1.25;
        }
        .popup-meta{
            font-size:13px;
            font-weight:500;
            color:var(--muted);
            margin-bottom:10px;
            display:flex;
            align-items:center;
            gap:6px;
        }
        .popup-age{
            background:rgba(255,0,0,.85);
            padding:4px 8px;
            border-radius:6px;
            font-size:12px;
            font-weight:800;
            color:white;
        }

        .popup-action-row {
            margin-top: 6px;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .popup-mute-btn{
            position:absolute;
            bottom:10px;
            right:10px;
            width:42px;
            height:42px;
            border-radius:50%;
            display:flex;
            align-items:center;
            justify-content:center;

            background:rgba(0,0,0,.55);
            backdrop-filter:blur(6px);
            border:1px solid rgba(255,255,255,.35);

            color:white;
            font-size:20px;
            cursor:pointer;

            transition:background .2s ease, transform .2s ease;
        }
        .popup-mute-btn:hover{
            background:rgba(255,255,255,.25);
            transform:scale(1.12);
        }

        .popup-play-btn-circle,
        .popup-like-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: none;
            padding: 0;
            margin: 0;

            display: flex;
            align-items: center;
            justify-content: center;

            font-size: 20px;
            font-weight: 900;
            cursor: pointer;
            transition:
                    background .2s,
                    transform .2s cubic-bezier(.2,1.7,.6,1);
        }
        .popup-play-btn-circle{
            background: rgba(255,255,255,0.9);
            color: black;
        }
        .popup-play-btn-circle:hover {
            background: white;
            transform: scale(1.08);
        }

        .popup-like-btn {
            background: rgba(255,255,255,0.2);
            color: var(--text);
        }
        .popup-like-btn.liked {
            background: rgba(124,92,255,0.9);
            color: white;
            transform: scale(1.15);
        }
        .popup-like-btn:active {
            transform: scale(0.92);
        }


        /* ============================
           GALLERY + ìŠ¤í¬ë¡¤ ë¡œë”© ìŠ¤í”¼ë„ˆ
        ============================ */
        .gallery-section h2{
            font-size:22px;
            font-weight:900;
            margin:40px 0 14px;
        }
        .gallery-grid{
            display:grid;
            grid-template-columns:repeat(3,1fr);
            gap:12px;
        }
        .gallery-item{
            width:100%; aspect-ratio:4/5; border-radius:var(--radius-lg);
            object-fit:cover; background:#0f1117;
            border:1px solid var(--line);
            transition:.15s;
        }
        .gallery-item:hover{
            transform:scale(1.02);
            border-color:var(--accent);
        }

        .gallery-spinner{
            width: 40px;
            height: 40px;
            margin: 20px auto 0;
            display: none;
            align-items: center;
            justify-content: center;
        }
        .spinner-circle{
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 3px solid var(--muted);
            border-top-color: var(--accent);
            animation: gallery-spin .8s linear infinite;
        }
        @keyframes gallery-spin {
            to { transform: rotate(360deg); }
        }

        footer{
            margin:40px 0 30px;
            padding-top:14px;
            border-top:1px solid var(--line);
            text-align:center;
            font-size:12px; color:var(--muted);
        }

        <!-- Profile SNS  -->
        .sns-row{
            margin-top: 10px;
            display: flex;
            gap: 8px;
        }

        .sns-pill{
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 999px;
            background: rgba(255,255,255,0.06);
            border: 1px solid var(--line);
            font-size: 13px;
            color: var(--text);
            text-decoration: none;
        }

        .sns-pill:hover{
            background: rgba(124,92,255,0.18);
            border-color: var(--accent);
        }

        .sns-handle{
            color: var(--muted);
            font-size: 12px;
        }
    </style>
</head>
<body>

<main class="container">

    <!-- PROFILE -->
    <div class="profile-header">
        <img class="profile-photo" src="https://images.unsplash.com/photo-1541647376583-8934aaf3448a?q=80&w=900">

        <div class="profile-info">
            <h1>í—ˆë³µëŒ</h1>
            <div class="meta">
                2019.6.25 Â· ìš©ì¸ ì¶œìƒ
            </div>
            <p class="bio">
                ì¼ìƒê³¼ ê·€ì—¬ìš´ ìˆœê°„ë“¤ì„ ê¸°ë¡í•˜ëŠ” ì•„ì—­ ë°°ìš°ì…ë‹ˆë‹¤.
            </p>

            <div class="sns-row">
                <a href="https://instagram.com/j__hoi/" class="sns-pill" target="_blank">
                    <span class="sns-icon">ğŸ“·</span>
                    <span class="sns-label">Instagram</span>
                    <span class="sns-handle">@j__hoi</span>
                </a>
            </div>
        </div>
    </div>


    <!-- FILMOGRAPHY -->
    <section class="filmography-section">
        <h2>í•„ëª¨ê·¸ë˜í”¼</h2>

        <div class="film-slider-container">
            <button class="film-arrow left" id="filmPrevBtn">â€¹</button>

            <div class="film-slider-wrapper">
                <div class="film-slider" id="filmSlider">

                    <!-- í•„ë¦„ ì¹´ë“œë“¤ -->
<!--                    <article class="film-card"-->
<!--                             data-title="ë°˜í’ˆ"-->
<!--                             data-genre="SF / ìŠ¤ë¦´ëŸ¬"-->
<!--                             data-runtime="148ë¶„"-->
<!--                             data-age="15"-->
<!--                             data-video="videos/trailer.mp4"-->
<!--                             data-thumb="videos/thumbnail.png">-->
<!--                        <img class="film-poster" src="videos/thumbnail.png">-->
<!--                        <div class="film-body">-->
<!--                            <div class="film-title">ë°˜í’ˆ</div>-->
<!--                            <div class="film-meta">2025 Â· ì£¼ì—°</div>-->
<!--                        </div>-->
<!--                    </article>-->

<!--                    <article class="film-card"-->
<!--                             data-title="ë‘ ë²ˆì§¸ ì˜í™”"-->
<!--                             data-genre="ë“œë¼ë§ˆ"-->
<!--                             data-runtime="132ë¶„"-->
<!--                             data-age="12"-->
<!--                             data-video="videos/trailer.mp4"-->
<!--                             data-thumb="videos/thumbnail.png">-->
<!--                        <img class="film-poster" src="videos/thumbnail.png">-->
<!--                        <div class="film-body">-->
<!--                            <div class="film-title">ë‘ ë²ˆì§¸ ì˜í™”</div>-->
<!--                            <div class="film-meta">2024 Â· ì¡°ì—°</div>-->
<!--                        </div>-->
<!--                    </article>-->

<!--                    <article class="film-card"-->
<!--                             data-title="ì„¸ ë²ˆì§¸ ì˜í™”"-->
<!--                             data-genre="ë¡œë§¨ìŠ¤"-->
<!--                             data-runtime="110ë¶„"-->
<!--                             data-age="15"-->
<!--                             data-video="videos/trailer.mp4"-->
<!--                             data-thumb="videos/thumbnail.png">-->
<!--                        <img class="film-poster" src="videos/thumbnail.png">-->
<!--                        <div class="film-body">-->
<!--                            <div class="film-title">ì„¸ ë²ˆì§¸ ì˜í™”</div>-->
<!--                            <div class="film-meta">2023 Â· ì£¼ì—°</div>-->
<!--                        </div>-->
<!--                    </article>-->

                    <!-- í•„ìš”í•˜ë©´ ë” ì¶”ê°€ -->
<!--                    <article class="film-card"-->
<!--                             data-title="ë„¤ ë²ˆì§¸ ì˜í™”"-->
<!--                             data-genre="ë¡œë§¨ìŠ¤"-->
<!--                             data-runtime="110ë¶„"-->
<!--                             data-age="15"-->
<!--                             data-video="videos/trailer.mp4"-->
<!--                             data-thumb="videos/thumbnail.png">-->
<!--                        <img class="film-poster" src="videos/thumbnail.png">-->
<!--                        <div class="film-body">-->
<!--                            <div class="film-title">ë„¤ ë²ˆì§¸ ì˜í™”</div>-->
<!--                            <div class="film-meta">2023 Â· ì£¼ì—°</div>-->
<!--                        </div>-->
<!--                    </article>-->
                </div>
            </div>

            <button class="film-arrow right" id="filmNextBtn">â€º</button>
        </div>
    </section>

    <!-- GALLERY -->
    <section class="gallery-section">
        <h2>ì‚¬ì§„ ê°¤ëŸ¬ë¦¬</h2>

        <div class="gallery-grid">
            <!-- ì²˜ìŒ 6ì¥ë§Œ ë°”ë¡œ ë³´ì´ë„ë¡ JSì—ì„œ ì œì–´ -->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1512070679279-8988d32161be?q=80&w=900">-->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1542204165-65bf26472b9b?q=80&w=900">-->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1552058544-f2b08422138a?q=80&w=900">-->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1544723795-3fb6469f5b39?q=80&w=900">-->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1544725121-4a7c40b15175?q=80&w=900">-->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?q=80&w=900">-->

            <!-- ì¶”ê°€ ì´ë¯¸ì§€ë“¤ (ìŠ¤í¬ë¡¤ ì‹œ 6ì¥ì”© ë…¸ì¶œ) -->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?q=80&w=900">-->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1512070679279-8988d32161be?q=80&w=900">-->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1542204165-65bf26472b9b?q=80&w=900">-->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1552058544-f2b08422138a?q=80&w=900">-->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1544723795-3fb6469f5b39?q=80&w=900">-->
<!--            <img class="gallery-item" src="https://images.unsplash.com/photo-1544725121-4a7c40b15175?q=80&w=900">-->
        </div>

        <!-- ì¸ìŠ¤íƒ€ ìŠ¤íƒ€ì¼ ì¤‘ì•™ ìŠ¤í”¼ë„ˆ -->
        <div class="gallery-spinner" id="gallerySpinner">
            <div class="spinner-circle"></div>
        </div>
    </section>

    <footer>
        Â© 2025 OnFilm Â· Indie Actor & Film Platform
    </footer>

</main>

<!-- ============================
     JS 1: FILMOGRAPHY SLIDER
=============================== -->
<script>
    const slider   = document.getElementById("filmSlider");
    const prevBtn  = document.getElementById("filmPrevBtn");
    const nextBtn  = document.getElementById("filmNextBtn");
    const filmLine = document.querySelector(".film-slider-container");

    let index = 0;

    function getCardWidth(){
        const card = slider.children[0];
        if (!card) return 0;
        const style = window.getComputedStyle(card);
        const marginRight = parseInt(style.marginRight) || 0;
        // gap 20px ë³´ì •
        return card.offsetWidth + marginRight + 20;
    }

    function updateArrows() {
        const cardCount = slider.children.length;
        const maxIndex = cardCount - 3;

        // 3ê°œ ì´í•˜ì´ë©´ ìŠ¬ë¼ì´ë“œ ë¶ˆê°€ â†’ í™”ì‚´í‘œ ìˆ¨ê¹€
        if (cardCount <= 3) {
            prevBtn.style.display = "none";
            nextBtn.style.display = "none";
            return;
        }

        prevBtn.style.display = (index === 0) ? "none" : "flex";
        nextBtn.style.display = (index >= maxIndex) ? "none" : "flex";
    }

    function updateSlider(){
        const w = getCardWidth();
        slider.style.transform = `translateX(${-w * index}px)`;
        updateArrows();
    }

    nextBtn.addEventListener("click", () => {
        const maxIndex = slider.children.length - 3;
        if(index < maxIndex){
            index++;
            updateSlider();
        }
    });

    prevBtn.addEventListener("click", () => {
        if(index > 0){
            index--;
            updateSlider();
        }
    });

    // ë§ˆìš°ìŠ¤ê°€ í•„ëª¨ê·¸ë˜í”¼ ë¼ì¸ ìœ„ì— ìˆì„ ë•Œë§Œ í™”ì‚´í‘œ í‘œì‹œ ì œì–´
    window.addEventListener("mousemove", (e) => {
        if (!filmLine) return;
        const rect = filmLine.getBoundingClientRect();
        const y = e.clientY;

        const inFilmLine = y >= rect.top && y <= rect.bottom;

        if (inFilmLine) {
            updateArrows();
        } else {
            // íŒì—…ì´ ì—†ì„ ë•Œë§Œ ìˆ¨ê¹€
            if (!popup || !popup.classList.contains("show")) {
                prevBtn.style.display = "none";
                nextBtn.style.display = "none";
            }
        }
    });
</script>

<!-- ============================
     JS 2: MOVIE POPUP
=============================== -->
<script>
    let popup = null;
    let hideTimer = null;
    let activeCard = null;

    function createPopup() {
        popup = document.createElement("div");
        popup.className = "movie-popup";

        popup.innerHTML = `
        <div class="popup-video-box">
          <video muted loop></video>

          <div class="popup-mute-btn">
            <svg class="popup-sound-on" xmlns="http://www.w3.org/2000/svg"
                 viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                 width="26" height="26" style="display:none;">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25
                    l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51
                    c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396
                    C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"/>
            </svg>

            <svg class="popup-sound-off" xmlns="http://www.w3.org/2000/svg"
                 viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                 width="26" height="26">
              <path stroke-linecap="round" stroke-linejoin="round"
                    d="M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6
                    4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51
                    c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396
                    C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"/>
            </svg>
          </div>
        </div>

        <div class="popup-info">
          <div class="popup-title"></div>
          <div class="popup-meta"></div>

          <div class="popup-action-row">
            <button class="popup-play-btn-circle"><span>â–¶</span></button>
            <button class="popup-like-btn"><span>ğŸ‘</span></button>
          </div>
        </div>
        `;

        document.body.appendChild(popup);

        popup.addEventListener("mouseenter", () => {
            if (hideTimer) clearTimeout(hideTimer);
        });

        popup.addEventListener("mouseleave", hidePopup);

        // ìŒì†Œê±° ë²„íŠ¼
        popup.querySelector(".popup-mute-btn").onclick = (e) => {
            e.stopPropagation();
            const v = popup.querySelector("video");
            const soundOn = popup.querySelector(".popup-sound-on");
            const soundOff = popup.querySelector(".popup-sound-off");

            v.muted = !v.muted;

            if (v.muted) {
                soundOn.style.display = "none";
                soundOff.style.display = "block";
            } else {
                soundOn.style.display = "block";
                soundOff.style.display = "none";
            }
        };

        // ì¬ìƒ ë²„íŠ¼ â†’ í”Œë ˆì´ì–´ í˜ì´ì§€ ì´ë™
        popup.querySelector(".popup-play-btn-circle").onclick = (e) => {
            e.stopPropagation();
            sessionStorage.setItem("allowSoundPlay", "true");
            window.location.href = "video-player-temp.html";
        };

        // ì¢‹ì•„ìš” ë²„íŠ¼
        const likeBtn = popup.querySelector(".popup-like-btn");
        likeBtn.onclick = (e) => {
            e.stopPropagation();
            likeBtn.classList.toggle("liked");

            if (likeBtn.classList.contains("liked")) {
                likeBtn.style.transform = "scale(1.25)";
                setTimeout(() => {
                    likeBtn.style.transform = "scale(1)";
                }, 250);
            }
        };

        // íŒì—… ì „ì²´ í´ë¦­ â†’ ìƒì„¸ í˜ì´ì§€
        popup.addEventListener("click", () => {
            window.location.href = "movie-detail.html";
        });
    }
    createPopup();

    function showPopup(card){
        if (hideTimer) clearTimeout(hideTimer);
        activeCard = card;

        updateArrows(); // íŒì—… ë– ë„ í™”ì‚´í‘œ ìƒíƒœ ê°±ì‹ 

        const rect = card.getBoundingClientRect();
        const videoEl = popup.querySelector("video");

        popup.querySelector(".popup-title").textContent = card.dataset.title ?? "";
        popup.querySelector(".popup-meta").innerHTML = `
            ${card.dataset.genre ?? ""} Â· ${card.dataset.runtime ?? ""}
            <span class="popup-age">${card.dataset.age ?? ""}</span>
        `;
        videoEl.src = card.dataset.video;

        // ì´ˆê¸° ìƒíƒœ (ì¹´ë“œ ìœ„ì¹˜/í¬ê¸°)
        popup.style.width = rect.width + "px";
        popup.style.height = rect.height + "px";
        popup.style.left = rect.left + "px";
        popup.style.top  = rect.top + "px";
        popup.style.transformOrigin = "top center";
        popup.style.opacity = "0";
        popup.style.transform = "scale(0.92)";

        popup.classList.add("show");

        const enlargedWidth  = rect.width * 1.22;
        const enlargedHeight = rect.height * 1.42;
        const finalTop = rect.top - rect.height * 0.18;

        requestAnimationFrame(() => {
            popup.style.opacity = "1";
            popup.style.width  = enlargedWidth + "px";
            popup.style.height = enlargedHeight + "px";
            popup.style.left = (rect.left - (enlargedWidth - rect.width) / 2) + "px";
            popup.style.top  = finalTop + "px";
            popup.style.transform = "scale(1)";
        });

        videoEl.currentTime = 0;
        videoEl.play();
    }

    function hidePopup(){
        hideTimer = setTimeout(() => {
            popup.style.opacity = "0";
            popup.style.transform = "scale(0.85) translateY(10px)";
            popup.querySelector("video").pause();
            setTimeout(() => popup.classList.remove("show"), 180);
            activeCard = null;
        }, 120);
    }

    document.querySelectorAll(".film-card").forEach(card => {
        card.addEventListener("mouseenter", () => showPopup(card));
        card.addEventListener("mouseleave", hidePopup);
    });

    // ìŠ¤í¬ë¡¤/íœ /í„°ì¹˜ ì‹œ íŒì—… ì¦‰ì‹œ ë‹«ê¸°
    function hidePopupImmediate() {
        if (!popup) return;
        popup.style.opacity = "0";
        popup.style.transform = "scale(0.85) translateY(10px)";
        popup.querySelector("video").pause();
        popup.classList.remove("show");
        activeCard = null;
        if (hideTimer) clearTimeout(hideTimer);
    }

    window.addEventListener("wheel", () => { if (activeCard) hidePopupImmediate(); });
    window.addEventListener("scroll", () => { if (activeCard) hidePopupImmediate(); });
    window.addEventListener("touchmove", () => { if (activeCard) hidePopupImmediate(); });

    // í˜ì´ì§€ ì²˜ìŒ ë¡œë“œ ì‹œ í™”ì‚´í‘œ ìƒíƒœ í•œ ë²ˆ ë§ì¶”ê¸°
    window.addEventListener("load", updateArrows);
</script>

<!-- ============================
     JS 3: GALLERY SCROLL LOAD
=============================== -->
<script>
    const gallerySection = document.querySelector(".gallery-section");
    const galleryGrid    = document.querySelector(".gallery-grid");
    const galleryItems   = Array.from(galleryGrid.querySelectorAll(".gallery-item"));
    const gallerySpinner = document.getElementById("gallerySpinner");

    const INITIAL_COUNT = 6;  // ìµœì´ˆ ë…¸ì¶œ ê°œìˆ˜
    const BATCH_SIZE    = 6;  // í•œ ë²ˆì— ì¶”ê°€ ë¡œë”© ê°œìˆ˜

    let visibleCount = 0;
    let isLoading    = false;

    function initGallery() {
        galleryItems.forEach((img, idx) => {
            img.style.display = (idx < INITIAL_COUNT) ? "block" : "none";
        });
        visibleCount = Math.min(INITIAL_COUNT, galleryItems.length);

        // ì¶”ê°€ ì‚¬ì§„ì´ ì „í˜€ ì—†ìœ¼ë©´ ìŠ¤í”¼ë„ˆë„ ì•„ì˜ˆ ì•ˆ ë³´ì´ë„ë¡
        if (galleryItems.length <= INITIAL_COUNT && gallerySpinner) {
            gallerySpinner.style.display = "none";
        }
    }

    function showMoreImages() {
        const remaining = galleryItems.length - visibleCount;
        if (remaining <= 0) return;

        const toShow = Math.min(BATCH_SIZE, remaining);
        for (let i = 0; i < toShow; i++) {
            const img = galleryItems[visibleCount + i];
            if (img) img.style.display = "block";
        }
        visibleCount += toShow;
    }

    function handleScroll() {
        if (isLoading) return;
        if (visibleCount >= galleryItems.length) return;

        const rect = gallerySection.getBoundingClientRect();
        const viewHeight = window.innerHeight || document.documentElement.clientHeight;

        // ì„¹ì…˜ í•˜ë‹¨ì´ í™”ë©´ í•˜ë‹¨ 120px ê·¼ì²˜ë¡œ ì˜¤ë©´ ë¡œë”©
        if (rect.bottom - 120 <= viewHeight) {
            isLoading = true;
            if (gallerySpinner) gallerySpinner.style.display = "flex";

            const delay = 700 + Math.random() * 500; // 0.7~1.2ì´ˆ ë”œë ˆì´ (ì¸ìŠ¤íƒ€ ëŠë‚Œ)

            setTimeout(() => {
                showMoreImages();
                isLoading = false;
                if (gallerySpinner) gallerySpinner.style.display = "none";
            }, delay);
        }
    }

    window.addEventListener("load", () => {
        initGallery();
        if (galleryItems.length > INITIAL_COUNT) {
            // ì¶”ê°€ ì‚¬ì§„ì´ ìˆì„ ë•Œë§Œ ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ì˜ë¯¸ ìˆìŒ
            window.addEventListener("scroll", handleScroll);
            handleScroll(); // í˜¹ì‹œ ì²˜ìŒë¶€í„° ì•„ë˜ìª½ì´ë¼ë©´ í•œ ë²ˆ ì²´í¬
        }
    });
</script>

</body>
</html>
