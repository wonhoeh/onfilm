<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>ì˜í™” ì¬ìƒ</title>

    <style>
        body {
            margin: 0;
            background: black;
            overflow: hidden;
            font-family: system-ui, -apple-system, "Noto Sans KR", sans-serif;
        }

        .player-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: black;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            background: black;
            cursor: pointer;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ìƒë‹¨: ë’¤ë¡œê°€ê¸° + ì œëª©
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .top-left-info {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 30;
            transition: opacity .4s ease;
        }

        .top-left-info.hide-ui {
            opacity: 0;
            pointer-events: none;
        }

        .back-icon svg {
            width: 36px;
            height: 36px;
            stroke: white;
            cursor: pointer;
        }

        .video-title {
            font-size: 24px;
            font-weight: 700;
            color: white;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ì‹œê°„ í‘œì‹œ
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .time-display {
            position: absolute;
            top: calc(100% - 150px);
            left: 20px;
            font-size: 15px;
            color: white;
            opacity: 1;
            transition: opacity .3s;
            z-index: 25;
            padding-left: 30px;
            padding-right: 30px;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           íƒ€ì„ë¼ì¸
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .timeline {
            position: absolute;
            bottom: 90px;
            left: 0;
            width: 100%;
            height: 10px;
            background: rgba(255,255,255,.25);
            cursor: pointer;
            z-index: 20;
            padding-left: 30px;
            padding-right: 30px;
        }

        .timeline-inner {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
            border-radius: 999px;
        }

        .timeline-progress {
            position: absolute;
            inset: 0;
            width: 0%;
            height: 100%;
            background: #e50914; /* Netflix red */
        }

        .timeline.hide-ui {
            opacity: 0;
            transition: opacity .3s ease;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           í•˜ë‹¨ ì»¨íŠ¸ë¡¤ ì „ì²´
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .controls {
            position: absolute;
            bottom: 0;
            width: 100%;
            padding: 20px 0 16px;
            background: linear-gradient(to top, rgba(0,0,0,.6), transparent);
            color: white;
            opacity: 1;
            transition: opacity .3s;
            z-index: 25;
        }

        .bottom-bar {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }

        .left-controls,
        .right-controls {
            display: flex;
            align-items: center;
            gap: 20px;
            padding-left: 30px;
            padding-right: 30px;
        }

        .right-controls {
            margin-right: 40px;
        }

        .icon {
            font-size: 22px;
            cursor: pointer;
            user-select: none;
        }

        /* UI ìˆ¨ê¹€ ê³µí†µ */
        .hide-ui {
            opacity: 0;
            transition: opacity .4s;
        }

        /* ë°°ì† ë©”ë‰´ */
        .speed-btn {
            font-size: 16px;
            cursor: pointer;
            user-select: none;
        }

        .speed-menu {
            position: absolute;
            bottom: 80px;
            right: 32px;
            background: rgba(0,0,0,.7);
            padding: 10px 14px;
            border-radius: 6px;
            font-size: 14px;
            display: none;
            z-index: 40;
        }

        .speed-option {
            padding: 6px 4px;
            cursor: pointer;
        }

        .speed-option:hover {
            color: #e50914;
        }

        /* ===== ì„¸ë¡œ ë³¼ë¥¨ íŒì—… UI ===== */
        .volume-popup {
            position: fixed;              /* í™”ë©´ ê¸°ì¤€ */
            width: 50px;
            height: 160px;
            background: rgba(20,20,20,0.92);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;

            opacity: 0;
            pointer-events: none;
            transform: translateY(8px);   /* ì‚´ì§ ì•„ë˜ì—ì„œ ì‹œì‘ */
            transition:
                    opacity .18s ease,
                    transform .18s ease;
            z-index: 999;
        }

        .volume-popup.show {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);     /* ìœ„ë¡œ ì‚´ì§ ë– ì˜¤ë¥´ê²Œ */
        }

        /* ì„¸ë¡œ ìŠ¬ë¼ì´ë” */
        .volume-vertical {
            writing-mode: bt-lr; /* bottom â†’ top */
            -webkit-appearance: none;
            appearance: none;
            width: 6px;
            height: 120px;
            background: #666;
            border-radius: 4px;
            transform: rotate(180deg);
            transform-origin: center;
        }

        .volume-vertical::-webkit-slider-runnable-track {
            width: 6px;
            background: #777;
            border-radius: 3px;
        }

        .volume-vertical::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: #00a3ff;
            border-radius: 50%;
            cursor: pointer;
        }
    </style>

</head>
<body>

<div class="player-container">

    <!-- ë’¤ë¡œê°€ê¸° + ì œëª© -->
    <div class="top-left-info">
        <div id="backBtn" class="icon back-icon">
            <svg viewBox="0 0 24 24">
                <path d="M15 4 L7 12 L15 20" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </div>
        <span class="video-title">ë°˜í’ˆ</span>
    </div>

    <!-- ì˜ìƒ -->
    <video id="video" src="videos/trailer.mp4"></video>

    <!-- ìƒë‹¨ ì‹œê°„ í‘œì‹œ -->
    <div class="time-display" id="timeDisplay">00:00 / 00:00</div>

    <!-- íƒ€ì„ë¼ì¸ -->
    <div class="timeline" id="timeline">
        <div class="timeline-inner">
            <div class="timeline-progress" id="timelineProgress"></div>
        </div>
    </div>

    <!-- ì»¨íŠ¸ë¡¤ -->
    <div class="controls" id="controls">
        <div class="bottom-bar">

            <!-- ì™¼ìª½ -->
            <div class="left-controls">
                <div id="playPause" class="icon">â–¶</div>
                <div id="back10" class="icon">âŸ²</div>
                <div id="forward10" class="icon">âŸ³</div>
            </div>

            <!-- ì˜¤ë¥¸ìª½ -->
            <div class="right-controls">
                <div id="volumeBtn" class="icon">ğŸ”Š</div>
                <div id="speedBtn" class="speed-btn">1x</div>

                <div class="speed-menu" id="speedMenu">
                    <div class="speed-option" data-speed="1">1x</div>
                    <div class="speed-option" data-speed="1.25">1.25x</div>
                    <div class="speed-option" data-speed="1.5">1.5x</div>
                    <div class="speed-option" data-speed="2">2x</div>
                </div>

                <!-- ì„¸ë¡œ ë³¼ë¥¨ íŒì—… -->
                <div id="volumePopup" class="volume-popup">
                    <input type="range" id="volumeVertical" class="volume-vertical" min="0" max="1" step="0.02">
                </div>

                <div id="fullscreenBtn" class="icon">â›¶</div>
            </div>
        </div>
    </div>
</div>

<script>
    /* ìš”ì†Œ ì°¸ì¡° */
    const video = document.getElementById("video");
    const playPause = document.getElementById("playPause");
    const back10 = document.getElementById("back10");
    const forward10 = document.getElementById("forward10");
    const volumeBtn = document.getElementById("volumeBtn");
    const fullscreenBtn = document.getElementById("fullscreenBtn");
    const controls = document.getElementById("controls");
    const topLeftInfo = document.querySelector(".top-left-info");
    const timeDisplay = document.getElementById("timeDisplay");

    const speedBtn = document.getElementById("speedBtn");
    const speedMenu = document.getElementById("speedMenu");

    const timeline = document.getElementById("timeline");
    const timelineProgress = document.getElementById("timelineProgress");

    const backBtn = document.getElementById("backBtn");

    /* ë’¤ë¡œê°€ê¸° */
    backBtn.onclick = () => history.back();

    /* ì‹œê°„ í¬ë§· */
    const fmt = (t) =>
        String(Math.floor(t / 60)).padStart(2, "0") +
        ":" +
        String(Math.floor(t % 60)).padStart(2, "0");

    /* ì˜ìƒ ë¡œë“œ */
    video.onloadedmetadata = () => {
        timeDisplay.textContent = `${fmt(video.currentTime)} / ${fmt(video.duration)}`;
    };

    /* ì˜ìƒ ì¬ìƒ ì¤‘ íƒ€ì„ë¼ì¸ / ì‹œê°„ ì—…ë°ì´íŠ¸ */
    video.ontimeupdate = () => {
        if (!isNaN(video.duration) && video.duration > 0) {
            timelineProgress.style.width =
                (video.currentTime / video.duration * 100) + "%";
        }
        timeDisplay.textContent =
            `${fmt(video.currentTime)} / ${fmt(video.duration)}`;
    };

    /* ì¬ìƒ / ì¼ì‹œì •ì§€ */
    function togglePlay() {
        if (video.paused) {
            video.play();
            playPause.textContent = "â¸";
        } else {
            video.pause();
            playPause.textContent = "â–¶";
        }
    }
    playPause.onclick = togglePlay;
    video.onclick = togglePlay;

    /* í‚¤ë³´ë“œ */
    document.onkeydown = (e) => {
        if (e.code === "Space") {
            e.preventDefault();
            togglePlay();
        }
        if (e.key === "ArrowLeft") video.currentTime -= 5;
        if (e.key === "ArrowRight") video.currentTime += 5;
    };

    /* 10ì´ˆ ì´ë™ */
    back10.onclick = () => video.currentTime = Math.max(0, video.currentTime - 10);
    forward10.onclick = () => {
        if (!isNaN(video.duration)) {
            video.currentTime = Math.min(video.duration, video.currentTime + 10);
        }
    };

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë³¼ë¥¨ íŒì—… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    const volumePopup = document.getElementById("volumePopup");
    const volumeVertical = document.getElementById("volumeVertical");

    /* ê¸°ë³¸ ë³¼ë¥¨ê°’ */
    video.volume = 0.7;
    volumeVertical.value = video.volume;

    /* íŒì—… ìœ„ì¹˜: ìŠ¤í”¼ì»¤ ì•„ì´ì½˜ â€œì •ì¤‘ì•™ ìœ„â€ */
    function updateVolumePopupPosition() {
        const rect = volumeBtn.getBoundingClientRect();
        const popupWidth = 50;
        const popupHeight = 160;

        const x = rect.left + rect.width / 2 - (popupWidth / 2);
        const y = rect.top - popupHeight - 8; // ì•„ì´ì½˜ ìœ„ë¡œ 8px ë„ìš°ê¸°

        volumePopup.style.left = x + "px";
        volumePopup.style.top = y + "px";
    }

    /* íŒì—… ì—´ê¸° */
    function openVolumePopup() {
        updateVolumePopupPosition();
        volumePopup.classList.add("show");
    }

    /* íŒì—… ë‹«ê¸° */
    function closeVolumePopup() {
        volumePopup.classList.remove("show");
    }

    /* hover ì§„ì…/ì´íƒˆ ìƒíƒœ ì²´í¬ìš© í”Œë˜ê·¸ */
    let overVolumeBtn = false;
    let overVolumePopup = false;
    let volumeHideTimer = null;

    function scheduleVolumeHide() {
        if (volumeHideTimer) clearTimeout(volumeHideTimer);
        volumeHideTimer = setTimeout(() => {
            if (!overVolumeBtn && !overVolumePopup) {
                closeVolumePopup();
            }
        }, 120); // ì§§ê²Œ ë”œë ˆì´ ì¤˜ì„œ ìì—°ìŠ¤ëŸ¬ìš´ ëŠë‚Œ
    }

    volumeBtn.addEventListener("mouseenter", () => {
        overVolumeBtn = true;
        openVolumePopup();
    });

    volumeBtn.addEventListener("mouseleave", () => {
        overVolumeBtn = false;
        scheduleVolumeHide();
    });

    volumePopup.addEventListener("mouseenter", () => {
        overVolumePopup = true;
    });

    volumePopup.addEventListener("mouseleave", () => {
        overVolumePopup = false;
        scheduleVolumeHide();
    });

    /* ì„¸ë¡œ ìŠ¬ë¼ì´ë”ë¡œ ë³¼ë¥¨ ì¡°ì ˆ */
    volumeVertical.addEventListener("input", () => {
        video.volume = volumeVertical.value;
        if (video.muted && video.volume > 0) {
            video.muted = false;
            volumeBtn.textContent = "ğŸ”Š";
        }
    });

    /* ìŒì†Œê±° ë²„íŠ¼ (í´ë¦­) */
    volumeBtn.addEventListener("click", () => {
        video.muted = !video.muted;
        if (video.muted) {
            volumeBtn.textContent = "ğŸ”‡";
        } else {
            volumeBtn.textContent = "ğŸ”Š";
        }
    });

    /* ì „ì²´ í™”ë©´ */
    fullscreenBtn.onclick = () => {
        if (!document.fullscreenElement) {
            video.requestFullscreen();
        } else {
            document.exitFullscreen();
        }
    };

    /* ì „ì²´ í™”ë©´ ë³€ê²½ ì‹œ ë³¼ë¥¨ íŒì—… ìœ„ì¹˜ ì¬ê³„ì‚° */
    document.addEventListener("fullscreenchange", () => {
        if (volumePopup.classList.contains("show")) {
            updateVolumePopupPosition();
        }
    });

    /* ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ìœ„ì¹˜ ì¬ì¡°ì • */
    window.addEventListener("resize", () => {
        if (volumePopup.classList.contains("show")) {
            updateVolumePopupPosition();
        }
    });

    /* íƒ€ì„ë¼ì¸ í´ë¦­ */
    timeline.onclick = (e) => {
        const r = timeline.getBoundingClientRect();
        const p = (e.clientX - r.left) / r.width;
        if (!isNaN(video.duration)) {
            video.currentTime = video.duration * Math.min(Math.max(p, 0), 1);
        }
    };

    /* ë°°ì† ë©”ë‰´ */
    speedBtn.onclick = () => {
        speedMenu.style.display =
            speedMenu.style.display === "block" ? "none" : "block";
    };

    document.querySelectorAll(".speed-option").forEach((o) => {
        o.onclick = () => {
            const rate = Number(o.dataset.speed);
            video.playbackRate = rate;
            speedBtn.textContent = rate + "x";
            speedMenu.style.display = "none";
        };
    });

    /* UI ìë™ ìˆ¨ê¹€ */
    let uiTimer = null;
    function showUI() {
        controls.classList.remove("hide-ui");
        timeDisplay.classList.remove("hide-ui");
        timeline.classList.remove("hide-ui");
        topLeftInfo.classList.remove("hide-ui");

        clearTimeout(uiTimer);

        uiTimer = setTimeout(() => {
            controls.classList.add("hide-ui");
            timeDisplay.classList.add("hide-ui");
            timeline.classList.add("hide-ui");
            topLeftInfo.classList.add("hide-ui");
        }, 2500);
    }

    document.onmousemove = showUI;
    document.ontouchstart = showUI;
    showUI();

    /* ëª¨ë°”ì¼ ë”ë¸”íƒ­ â†’ 10ì´ˆ ì´ë™ */
    let lastTap = 0;
    document.ontouchend = (e) => {
        const now = Date.now();
        if (now - lastTap < 300) {
            const x = e.changedTouches[0].clientX;
            if (x < window.innerWidth / 2) video.currentTime -= 10;
            else video.currentTime += 10;
        }
        lastTap = now;
    };
</script>

</body>
</html>
