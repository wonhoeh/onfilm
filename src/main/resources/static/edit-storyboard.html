<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OnFilm – 스토리보드 & 대본 관리</title>

        <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/edit-storyboard.css">
</head>

<body class="ui-body">
<div class="page-shell">
    <header class="top-header">
        <div class="header-inner wide">
            <a href="/storyboard.html" class="back-link" id="backToProfileLink">← 프로젝트로 돌아가기</a>
            <div class="header-title compact">스토리보드 편집</div>
            <div style="width:70px;"></div>
        </div>
    </header>

    <main>
        <div class="wrap medium">
            <div class="story-header">
                <div class="title">
                    <input id="movieTitleInput" type="text" placeholder="작품 제목을 입력하세요" />
                </div>

                <div class="top-actions">
                    <button class="btn primary lg shadow" id="pdfSaveBtn" type="button">PDF 저장</button>
                </div>
            </div>

            <div class="scene-bar">
                <div class="scene-tabs" id="sceneTabs"></div>
                <button class="delete-scene" id="deleteSceneBtn" type="button" aria-label="씬 삭제" title="씬 삭제">
                    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" width="16" height="16">
                        <path d="M6 7h12M10 7V5h4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M9 10v8M15 10v8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M8 7l1 14h6l1-14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>

            <div class="scene-title-display">
                <span class="scene-number" id="sceneNumberDisplay">#1</span>
                <input id="sceneTitleInput" class="scene-title-input" type="text" placeholder="씬 제목을 입력해주세요" />
            </div>

            <div class="board-layout">
                <section class="board" id="board">
                    <!-- pairs injected -->
                </section>

                <section class="script" id="scriptPanel">
                    <div class="script-head">
                        <div class="left">
                            <div class="v" id="scriptSceneLabel"></div>
                        </div>
                    </div>
                    <div class="script-body">
                        <div class="toolbar">
                            <button type="button" data-block="h1">H1</button>
                            <button type="button" data-block="h2">H2</button>
                            <button type="button" data-block="h3">H3</button>
                            <button type="button" data-cmd="indent" title="들여쓰기" aria-label="들여쓰기">↦</button>
                            <button type="button" data-cmd="outdent" title="내어쓰기" aria-label="내어쓰기">↤</button>
                            <button type="button" data-cmd="bold" title="굵게" aria-label="굵게">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="16" height="16" aria-hidden="true">
                                  <path stroke-linejoin="round" d="M6.75 3.744h-.753v8.25h7.125a4.125 4.125 0 0 0 0-8.25H6.75Zm0 0v.38m0 16.122h6.747a4.5 4.5 0 0 0 0-9.001h-7.5v9h.753Zm0 0v-.37m0-15.751h6a3.75 3.75 0 1 1 0 7.5h-6m0-7.5v7.5m0 0v8.25m0-8.25h6.375a4.125 4.125 0 0 1 0 8.25H6.75m.747-15.38h4.875a3.375 3.375 0 0 1 0 6.75H7.497v-6.75Zm0 7.5h5.25a3.75 3.75 0 0 1 0 7.5h-5.25v-7.5Z" />
                                </svg>
                            </button>
                            <button type="button" data-cmd="italic" title="기울기" aria-label="기울기">
                                <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
                                    <path d="M10 5h8M6 19h8M14 5l-4 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </button>
                            <button type="button" data-cmd="justifyLeft" title="왼쪽 정렬" aria-label="왼쪽 정렬">
                                <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
                                    <path d="M4 6h16M4 10h12M4 14h16M4 18h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </button>
                            <button type="button" data-cmd="justifyCenter" title="가운데 정렬" aria-label="가운데 정렬">
                                <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
                                    <path d="M4 6h16M6 10h12M4 14h16M6 18h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </button>
                            <button type="button" data-cmd="justifyRight" title="오른쪽 정렬" aria-label="오른쪽 정렬">
                                <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
                                    <path d="M4 6h16M8 10h12M4 14h16M8 18h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </button>
                        </div>
                        <div id="scriptEditor" class="editor" contenteditable="true" aria-label="대본 입력 영역" data-placeholder="전체 대본을 입력하세요. 스크롤하며 읽을 수 있습니다."></div>
                        <div class="script-help">
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
</div>

<div class="form-footer floating-actions">
    <button type="button" class="ghost-btn" id="cancelStoryboardBtn">취소</button>
    <button type="button" class="primary-btn" id="saveStoryboardBtn">저장</button>
</div>

<template id="addCardTpl">
    <div class="pair add-card">
        <button class="add-card-btn" type="button" id="addCardBtn" aria-label="스토리보드 추가">
            <span class="plus">＋</span>
            <span>스토리보드 추가</span>
        </button>
    </div>
</template>

<template id="pairTpl">
    <div class="pair" data-id="">
        <!-- storyboard card -->
        <div class="card card-surface storyboard-card">
            <div class="card-head">
                <div class="meta">
                    <div class="badge" data-badge>#</div>
                    <div class="labels">
                        <div class="v" data-title>컷</div>
                    </div>
                </div>

                <div class="order">
                    <button class="icon-btn danger" type="button" data-remove-card title="카드 삭제" aria-label="카드 삭제">
                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                            <path d="M6 7h12M10 7V5h4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M9 10v8M15 10v8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M8 7l1 14h6l1-14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="card-body">
                <div class="dropzone" data-dropzone role="button" tabindex="0" aria-label="이미지 드래그 앤 드롭 또는 클릭하여 업로드">
                    <img class="preview" data-preview alt="스토리보드 이미지 미리보기" />
                    <div class="overlay-actions">
                        <button class="icon-btn danger" type="button" data-remove-image title="이미지 삭제" aria-label="이미지 삭제">
                            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </button>
                    </div>

                    <div class="placeholder">
                        <svg viewBox="0 0 24 24" width="30" height="30" fill="none" aria-hidden="true" style="opacity:.9">
                            <path d="M7 16l3-3 3 3 4-5 3 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M9 8.5a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0z" fill="currentColor" opacity=".25"/>
                        </svg>
                        <strong>이미지를 드래그&드롭</strong>
                        <span>또는 아래 “파일 추가” 버튼으로 업로드<br/>(.png, .jpeg 등)</span>
                    </div>
                </div>

                <div class="card-foot">
                    <div class="hint" data-fileinfo>업로드된 이미지 없음</div>
                    <button class="file-btn" type="button" data-pick-file>
                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" width="18" height="18">
                            <path d="M12 5v10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M8 9l4-4 4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M6 19h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        파일 추가
                    </button>
                    <input type="file" accept="image/png,image/jpeg,image/jpg,image/webp" hidden data-file />
                </div>
            </div>
        </div>

    </div>
</template>

<script src="/js/auth.js"></script>
<script src="vendor/jspdf.umd.min.js"></script>
<script src="/js/common.js"></script>

<script src="/js/edit-storyboard.js" defer></script>
</body>
</html>
