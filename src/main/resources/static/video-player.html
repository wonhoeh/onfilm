<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>영화 재생</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root {
      --bg: #000;
      --text: #fff;
      --muted: #bbb;
      --accent: #e50914; /* 넷플릭스 레드 */
    }

    /* 전체 화면 */
    body {
      margin: 0;
      background: black;
      overflow: hidden;
      font-family: system-ui, -apple-system, "Noto Sans KR", sans-serif;
    }

    .video-container {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: black;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* UI 공통 (숨김/보임 처리) */
    .ui-visible {
      opacity: 1;
      transition: opacity .25s ease;
    }

    .ui-hidden {
      opacity: 0;
      transition: opacity .35s ease;
    }

    /* 상단바 */
    .top-bar {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      padding: 14px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      color: var(--text);
      font-size: 18px;
      z-index: 20;
      background: linear-gradient(to bottom, rgba(0,0,0,.6), rgba(0,0,0,0));
    }

    /* 아이콘 */
    .icon svg {
      width: 28px;
      height: 28px;
      fill: white;
      stroke: white;
      pointer-events: none;
      transition: transform .15s ease;
    }

    .icon:active svg {
      transform: scale(.8);
    }

    /* 시간 표시 */
    .time-display {
      position: absolute;
      bottom: 125px;
      left: 24px;
      color: var(--muted);
      font-size: 14px;
      z-index: 20;
    }

    /* 타임라인 */
    .timeline {
      position: absolute;
      bottom: 90px;
      left: 0;
      width: 100%;
      height: 6px;
      background: rgba(255,255,255,.25);
      cursor: pointer;
    }

    .timeline-progress {
      height: 100%;
      background: var(--accent);
      width: 0%;
    }

    /* 하단 컨트롤바 */
    .controls {
      position: absolute;
      bottom: 22px;
      left: 0;
      width: 100%;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--text);
      font-size: 28px;
      z-index: 20;
    }

    .left-controls, .right-controls {
      display: flex;
      align-items: center;
      gap: 22px;
    }

    .right-controls {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-right: 40px;  /* ⬅ 왼쪽으로 당김 */
    }

    .volume-range {
      width: 100px;
    }

    /* 배속 버튼 */
    .speed-btn {
      color: white;
      font-size: 16px;
      cursor: pointer;
      user-select: none;
    }

    .speed-menu {
      position: absolute;
      right: 30px;
      bottom: 80px;
      background: rgba(0,0,0,.7);
      padding: 10px 12px;
      border-radius: 6px;
      font-size: 14px;
      display: none;
    }

    .speed-option {
      padding: 6px 4px;
      cursor: pointer;
    }

    .speed-option:hover {
      color: var(--accent);
    }

    #backBtn {
      position: absolute;
      top: 24px;
      left: 24px;
      width: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }

    #backBtn svg {
      width: 38px;
      height: 38px;
    }

    #backBtn svg path {
      stroke: white;
    }
  </style>
</head>

<body>

<div class="video-container">

  <video id="player" src="videos/trailer.mp4"></video>

  <!-- 상단바 -->
  <div class="top-bar ui-visible" id="uiTop">
    <div class="icon" id="backBtn">
      <!-- Back Icon -->
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M14 4 L6 12 L14 20" stroke="white" stroke-width="4" stroke-linejoin="miter" stroke-linecap="square"/>
      </svg>
    </div>
    <div id="movieTitle">반품</div>
  </div>

  <div class="time-display ui-visible" id="uiTime">00:00 / 00:00</div>

  <!-- 타임라인 -->
  <div class="timeline ui-visible" id="timeline">
    <div class="timeline-progress" id="timelineProgress"></div>
  </div>

  <!-- 하단 컨트롤 -->
  <div class="controls ui-visible" id="uiControls">

    <div class="left-controls">
      <div class="icon" id="playPauseBtn">
        <!-- Pause Icon -->
        <svg viewBox="0 0 24 24">
          <rect x="6" y="4" width="4" height="16"></rect>
          <rect x="14" y="4" width="4" height="16"></rect>
        </svg>
      </div>

      <!-- 10초 뒤로 -->
      <div class="icon" id="back10">
        <svg width="40" height="40" viewBox="0 0 24 24">
          <path d="M12 5v2.5L9 4.5 12 1v2.5c5.5 0 9 4.5 9 9.5s-4.5 9.5-9.5 9.5S3 18 3 13h2c0 4.1 3.4 7 7.5 7S20 17.1 20 13s-3.5-8-8-8z"/>
          <text x="8.5" y="15" font-size="7" font-weight="900">10</text>
        </svg>
      </div>

      <!-- 10초 앞으로 -->
      <div class="icon" id="forward10">
        <svg width="40" height="40" viewBox="0 0 24 24">
          <path d="M12 5v2.5L15 4.5 12 1v2.5C6.5 4 3 8.5 3 13.5S7.5 23 12.5 23 21 18.5 21 13.5h-2c0 4-3.4 7-7.5 7S4 17 4 13.5 7.5 5 12 5z"/>
          <text x="8.5" y="15" font-size="7" font-weight="900">10</text>
        </svg>
      </div>
    </div>

    <div class="right-controls">
      <!-- 볼륨 -->
      <div class="icon" id="volumeBtn">
        <svg viewBox="0 0 24 24">
          <polygon points="3,9 7,9 12,5 12,19 7,15 3,15"></polygon>
          <path d="M15 9a4 4 0 010 6" stroke="white"></path>
          <path d="M17 7a7 7 0 010 10" stroke="white"></path>
        </svg>
      </div>

      <input type="range" min="0" max="1" step="0.05" id="volumeRange" class="volume-range">

      <!-- 배속 -->
      <div class="speed-btn" id="speedBtn">1x</div>
      <div class="speed-menu" id="speedMenu">
        <div class="speed-option" data-speed="1">1x</div>
        <div class="speed-option" data-speed="1.25">1.25x</div>
        <div class="speed-option" data-speed="1.5">1.5x</div>
        <div class="speed-option" data-speed="2">2x</div>
      </div>

      <!-- 전체화면 -->
      <div class="icon" id="fullscreenBtn">
        <svg viewBox="0 0 24 24">
          <polyline points="4 4 9 4 4 9" stroke="white" fill="none" stroke-width="2"/>
          <polyline points="20 4 15 4 20 9" stroke="white" fill="none" stroke-width="2"/>
          <polyline points="4 20 9 20 4 15" stroke="white" fill="none" stroke-width="2"/>
          <polyline points="20 20 15 20 20 15" stroke="white" fill="none" stroke-width="2"/>
        </svg>
      </div>
    </div>

  </div>
</div>

<script>
  const video = document.getElementById("player");
  const playPauseBtn = document.getElementById("playPauseBtn");
  const back10 = document.getElementById("back10");
  const forward10 = document.getElementById("forward10");

  const timeline = document.getElementById("timeline");
  const timelineProgress = document.getElementById("timelineProgress");
  const timeDisplay = document.getElementById("uiTime");

  const volumeBtn = document.getElementById("volumeBtn");
  const volumeRange = document.getElementById("volumeRange");
  const fullscreenBtn = document.getElementById("fullscreenBtn");
  const backBtn = document.getElementById("backBtn");

  const speedBtn = document.getElementById("speedBtn");
  const speedMenu = document.getElementById("speedMenu");

  const uiTop = document.getElementById("uiTop");
  const uiControls = document.getElementById("uiControls");

  // 아이콘 SVG
  const playIcon = `
<svg viewBox="0 0 24 24">
  <polygon points="6,4 20,12 6,20"></polygon>
</svg>`;

  const pauseIcon = `
<svg viewBox="0 0 24 24">
  <rect x="6" y="4" width="4" height="16"></rect>
  <rect x="14" y="4" width="4" height="16"></rect>
</svg>`;

  const volumeMuteIcon = `
<svg viewBox="0 0 24 24">
  <polygon points="3,9 7,9 12,5 12,19 7,15 3,15"></polygon>
  <line x1="15" y1="9" x2="19" y2="15" stroke="white" stroke-width="2"/>
  <line x1="19" y1="9" x2="15" y2="15" stroke="white" stroke-width="2"/>
</svg>`;

  const volumeHighIcon = `
<svg viewBox="0 0 24 24">
  <polygon points="3,9 7,9 12,5 12,19 7,15 3,15"></polygon>
  <path d="M15 9a4 4 0 010 6" stroke="white"></path>
  <path d="M17 7a7 7 0 010 10" stroke="white"></path>
</svg>`;

  /* 뒤로가기 */
  backBtn.onclick = () => history.back();

  /* 시간 포맷 */
  function fmt(t){return String(Math.floor(t/60)).padStart(2,"0")+":"+String(Math.floor(t%60)).padStart(2,"0")}

  /* 재생/일시정지 */
  playPauseBtn.onclick = () => {
    if (video.paused) {
      video.play();
      playPauseBtn.innerHTML = pauseIcon;
    } else {
      video.pause();
      playPauseBtn.innerHTML = playIcon;
    }
  };

  /* 10초 이동 */
  back10.onclick = () => video.currentTime = Math.max(0, video.currentTime - 10);
  forward10.onclick = () => video.currentTime = Math.min(video.duration, video.currentTime + 10);

  /* 볼륨 */
  volumeRange.oninput = () => video.volume = volumeRange.value;
  volumeBtn.onclick = () => {
    video.muted = !video.muted;
    volumeBtn.innerHTML = video.muted ? volumeMuteIcon : volumeHighIcon;
  };

  /* 전체 화면 */
  fullscreenBtn.onclick = () => {
    if (!document.fullscreenElement) video.requestFullscreen();
    else document.exitFullscreen();
  };

  /* 타임라인 업데이트 */
  video.ontimeupdate = () => {
    timelineProgress.style.width = (video.currentTime / video.duration * 100) + "%";
    timeDisplay.textContent = `${fmt(video.currentTime)} / ${fmt(video.duration)}`;
  };

  /* 타임라인 클릭 */
  timeline.onclick = e => {
    const rect = timeline.getBoundingClientRect();
    const pos = (e.clientX - rect.left) / rect.width;
    video.currentTime = video.duration * pos;
  };

  /* Space / 방향키 */
  document.onkeydown = e => {
    if (e.code === "Space") {
      e.preventDefault();
      playPauseBtn.click();
    }
    if (e.key === "ArrowLeft") video.currentTime -= 5;
    if (e.key === "ArrowRight") video.currentTime += 5;
  };

  /* 배속 */
  speedBtn.onclick = () => {
    speedMenu.style.display = speedMenu.style.display === "block" ? "none" : "block";
  };
  document.querySelectorAll(".speed-option").forEach(opt=>{
    opt.onclick = ()=>{
      const v = Number(opt.dataset.speed);
      video.playbackRate = v;
      speedBtn.textContent = v + "x";
      speedMenu.style.display = "none";
    }
  });

  /* UI 자동 숨김 */
  let uiTimer = null;
  function showUI(){
    uiTop.className = "top-bar ui-visible";
    uiControls.className = "controls ui-visible";
    timeDisplay.className = "time-display ui-visible";

    if (uiTimer) clearTimeout(uiTimer);
    uiTimer = setTimeout(()=>{
      uiTop.className = "top-bar ui-hidden";
      uiControls.className = "controls ui-hidden";
      timeDisplay.className = "time-display ui-hidden";
    }, 2200);
  }
  document.onmousemove = showUI;
  document.ontouchstart = showUI;
  showUI();

  /* 모바일 더블탭 → 10초 이동 */
  let lastTap=0;
  document.ontouchend = e=>{
    const now=Date.now();
    if(now-lastTap<300){
      const x=e.changedTouches[0].clientX;
      if(x<window.innerWidth/2) video.currentTime-=10;
      else video.currentTime+=10;
    }
    lastTap=now;
  };
</script>

</body>
</html>