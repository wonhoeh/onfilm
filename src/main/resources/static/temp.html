<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì˜í™” ì¬ìƒ</title>

  <style>
    body {
      margin: 0;
      background: black;
      overflow: hidden;
      font-family: system-ui, -apple-system, "Noto Sans KR", sans-serif;
    }

    .player-container {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: black;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      cursor: pointer;
    }

    /* ìƒë‹¨: ë’¤ë¡œê°€ê¸° + ì œëª© */
    .top-left-info {
      position: absolute;
      top: 20px;
      left: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 30;
      transition: opacity .4s ease;
    }
    .top-left-info.hide-ui {
      opacity: 0;
      pointer-events: none;
    }

    .back-icon svg {
      width: 36px;
      height: 36px;
      stroke: white;
      cursor: pointer;
    }

    .video-title {
      font-size: 24px;
      font-weight: 700;
      color: white;
    }

    /* ì‹œê°„ í‘œì‹œ */
    .time-display {
      position: absolute;
      top: calc(100% - 150px);
      left: 20px;
      font-size: 15px;
      color: white;
      transition: opacity .3s;
      z-index: 25;
      padding-left: 30px;
      padding-right: 30px;
    }

    /* íƒ€ì„ë¼ì¸ */
    .timeline {
      position: absolute;
      bottom: 90px;
      left: 0;
      width: 100%;
      height: 10px;
      background: rgba(255,255,255,.25);
      cursor: pointer;
      padding-left: 30px;
      padding-right: 30px;
      z-index: 20;
      transition: opacity .3s ease;
    }
    .timeline-progress {
      height: 100%;
      width: 0%;
      background: #e50914;
    }
    .timeline.hide-ui {
      opacity: 0;
    }

    /* í•˜ë‹¨ UI ì „ì²´ */
    .controls {
      position: absolute;
      bottom: 0;
      width: 100%;
      padding: 20px 0 16px;
      background: linear-gradient(to top, rgba(0,0,0,.6), transparent);
      color: white;
      transition: opacity .3s;
      z-index: 25;
    }

    .bottom-bar {
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
      align-items: center;
    }

    .left-controls,
    .right-controls {
      display: flex;
      align-items: center;
      gap: 20px;
      padding-left: 30px;
      padding-right: 30px;
    }

    .right-controls {
      margin-right: 40px;
    }

    .icon {
      font-size: 22px;
      cursor: pointer;
      user-select: none;
    }

    /* ë°°ì† ë©”ë‰´ */
    .speed-btn {
      font-size: 16px;
      cursor: pointer;
      user-select: none;
    }
    .speed-menu {
      position: absolute;
      bottom: 80px;
      right: 32px;
      background: rgba(0,0,0,.7);
      padding: 10px 14px;
      border-radius: 6px;
      display: none;
      font-size: 14px;
      z-index: 50;
    }
    .speed-option {
      padding: 6px 4px;
      cursor: pointer;
    }
    .speed-option:hover {
      color: #e50914;
    }

    /* ìˆ˜ì§ ë³¼ë¥¨ íŒì—… */
    .volume-popup {
      position: absolute;
      width: 50px;
      height: 160px;
      background: rgba(20,20,20,0.9);
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;

      opacity: 0;
      pointer-events: none;
      transition: opacity .2s ease;
      z-index: 2000;
    }

    .volume-vertical {
      writing-mode: bt-lr;
      -webkit-appearance: none;
      appearance: none;
      width: 6px;
      height: 120px;
      background: #666;
      border-radius: 4px;
    }
    .volume-vertical::-webkit-slider-runnable-track {
      background: #777;
      border-radius: 3px;
    }
    .volume-vertical::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 14px;
      height: 14px;
      background: #00a3ff;
      border-radius: 50%;
      cursor: pointer;
    }

    .hide-ui {
      opacity: 0;
    }
  </style>
</head>

<body>
<div class="player-container">

  <!-- ìƒë‹¨ -->
  <div class="top-left-info">
    <div id="backBtn" class="icon back-icon">
      <svg viewBox="0 0 24 24">
        <path d="M15 4 L7 12 L15 20"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round"/>
      </svg>
    </div>
    <span class="video-title">ë°˜í’ˆ</span>
  </div>

  <!-- ì˜ìƒ -->
  <video id="video" src="videos/trailer.mp4"></video>

  <!-- ì‹œê°„ -->
  <div class="time-display" id="timeDisplay">00:00 / 00:00</div>

  <!-- íƒ€ì„ë¼ì¸ -->
  <div class="timeline" id="timeline">
    <div class="timeline-progress" id="timelineProgress"></div>
  </div>

  <!-- í•˜ë‹¨ ì»¨íŠ¸ë¡¤ -->
  <div class="controls" id="controls">
    <div class="bottom-bar">

      <!-- ì™¼ìª½ -->
      <div class="left-controls">
        <div id="playPause" class="icon">â–¶</div>
        <div id="back10" class="icon">âŸ²</div>
        <div id="forward10" class="icon">âŸ³</div>
      </div>

      <!-- ì˜¤ë¥¸ìª½ -->
      <div class="right-controls">
        <div id="volumeBtn" class="icon">ğŸ”Š</div>

        <div id="speedBtn" class="speed-btn">1x</div>
        <div id="speedMenu" class="speed-menu">
          <div class="speed-option" data-speed="1">1x</div>
          <div class="speed-option" data-speed="1.25">1.25x</div>
          <div class="speed-option" data-speed="1.5">1.5x</div>
          <div class="speed-option" data-speed="2">2x</div>
        </div>

        <div id="fullscreenBtn" class="icon">â›¶</div>

        <!-- ìˆ˜ì§ ë³¼ë¥¨ íŒì—… -->
        <div id="volumePopup" class="volume-popup">
          <input type="range" id="volumeVertical"
                 class="volume-vertical" min="0" max="1" step="0.02" />
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  /* ìš”ì†Œ */
  const video = document.getElementById("video");
  const playPause = document.getElementById("playPause");
  const back10 = document.getElementById("back10");
  const forward10 = document.getElementById("forward10");
  const volumeBtn = document.getElementById("volumeBtn");
  const fullscreenBtn = document.getElementById("fullscreenBtn");
  const controls = document.getElementById("controls");
  const topLeftInfo = document.querySelector(".top-left-info");
  const timeDisplay = document.getElementById("timeDisplay");
  const speedBtn = document.getElementById("speedBtn");
  const speedMenu = document.getElementById("speedMenu");
  const timeline = document.getElementById("timeline");
  const timelineProgress = document.getElementById("timelineProgress");
  const backBtn = document.getElementById("backBtn");
  const volumePopup = document.getElementById("volumePopup");
  const volumeVertical = document.getElementById("volumeVertical");

  /* ë’¤ë¡œê°€ê¸° */
  backBtn.onclick = () => history.back();

  /* ì‹œê°„ í¬ë§· */
  const fmt = t =>
          String(Math.floor(t / 60)).padStart(2, "0") +
          ":" +
          String(Math.floor(t % 60)).padStart(2, "0");

  /* ë©”íƒ€ë°ì´í„° ë¡œë“œ */
  video.onloadedmetadata = () => {
    timeDisplay.textContent = `${fmt(video.currentTime)} / ${fmt(video.duration)}`;
  };

  /* ì¬ìƒ ì¤‘ ì—…ë°ì´íŠ¸ */
  video.ontimeupdate = () => {
    timelineProgress.style.width = (video.currentTime / video.duration * 100) + "%";
    timeDisplay.textContent = `${fmt(video.currentTime)} / ${fmt(video.duration)}`;
  };

  /* í”Œë ˆì´/ì¼ì‹œì •ì§€ */
  function togglePlay() {
    if (video.paused) {
      video.play();
      playPause.textContent = "â¸";
    } else {
      video.pause();
      playPause.textContent = "â–¶";
    }
  }
  playPause.onclick = togglePlay;
  video.onclick = togglePlay;

  /* í‚¤ë³´ë“œ */
  document.onkeydown = e => {
    if (e.code === "Space") {
      e.preventDefault();
      togglePlay();
    }
    if (e.key === "ArrowLeft") video.currentTime -= 5;
    if (e.key === "ArrowRight") video.currentTime += 5;
  };

  /* 10ì´ˆ ì´ë™ */
  back10.onclick = () => video.currentTime -= 10;
  forward10.onclick = () => video.currentTime += 10;

  /* ë³¼ë¥¨ íŒì—… ìœ„ì¹˜ ê³„ì‚° */
  function updateVolumePopupPosition() {
    const rect = volumeBtn.getBoundingClientRect();
    volumePopup.style.left = (rect.left + rect.width/2 - 25) + "px";
    volumePopup.style.top  = (rect.top - 170) + "px";
  }

  /* ë³¼ë¥¨ hover â†’ íŒì—… í‘œì‹œ */
  volumeBtn.addEventListener("mouseenter", () => {
    updateVolumePopupPosition();
    volumePopup.style.opacity = "1";
    volumePopup.style.pointerEvents = "auto";
  });

  /* Popoverê°€ ì‚¬ë¼ì§€ì§€ ì•Šë„ë¡ hover ì²˜ë¦¬ */
  volumePopup.addEventListener("mouseenter", () => {
    volumePopup.style.opacity = "1";
    volumePopup.style.pointerEvents = "auto";
  });

  /* ë‘ ì˜ì—­ ëª¨ë‘ ë– ë‚  ë•Œë§Œ ë‹«í˜ */
  function hideVolumePopup() {
    volumePopup.style.opacity = "0";
    volumePopup.style.pointerEvents = "none";
  }

  volumeBtn.addEventListener("mouseleave", e => {
    if (!volumePopup.contains(e.relatedTarget)) hideVolumePopup();
  });

  volumePopup.addEventListener("mouseleave", e => {
    if (!volumeBtn.contains(e.relatedTarget)) hideVolumePopup();
  });

  /* ë³¼ë¥¨ ì¡°ì ˆ */
  volumeVertical.oninput = () => {
    video.volume = volumeVertical.value;
  };

  /* ìŒì†Œê±° */
  volumeBtn.onclick = () => {
    video.muted = !video.muted;
    volumeBtn.textContent = video.muted ? "ğŸ”‡" : "ğŸ”Š";
  };

  /* ì „ì²´ í™”ë©´ */
  fullscreenBtn.onclick = () => {
    if (!document.fullscreenElement) video.requestFullscreen();
    else document.exitFullscreen();
  };

  /* íƒ€ì„ë¼ì¸ í´ë¦­ */
  timeline.onclick = e => {
    const r = timeline.getBoundingClientRect();
    const p = (e.clientX - r.left) / r.width;
    video.currentTime = video.duration * p;
  };

  /* ë°°ì† ë©”ë‰´ */
  speedBtn.onclick = () => {
    speedMenu.style.display = speedMenu.style.display === "block" ? "none" : "block";
  };

  document.querySelectorAll(".speed-option").forEach(o => {
    o.onclick = () => {
      const rate = Number(o.dataset.speed);
      video.playbackRate = rate;
      speedBtn.textContent = rate + "x";
      speedMenu.style.display = "none";
    };
  });

  /* UI ìë™ ìˆ¨ê¹€ */
  let uiTimer = null;
  function showUI() {
    controls.classList.remove("hide-ui");
    timeDisplay.classList.remove("hide-ui");
    timeline.classList.remove("hide-ui");
    topLeftInfo.classList.remove("hide-ui");

    clearTimeout(uiTimer);

    uiTimer = setTimeout(() => {
      controls.classList.add("hide-ui");
      timeDisplay.classList.add("hide-ui");
      timeline.classList.add("hide-ui");
      topLeftInfo.classList.add("hide-ui");
    }, 2500);
  }

  document.onmousemove = showUI;
  document.ontouchstart = showUI;
  showUI();

  /* ëª¨ë°”ì¼ ë”ë¸”íƒ­ */
  let lastTap = 0;
  document.ontouchend = e => {
    const now = Date.now();
    if (now - lastTap < 300) {
      const x = e.changedTouches[0].clientX;
      if (x < window.innerWidth / 2) video.currentTime -= 10;
      else video.currentTime += 10;
    }
    lastTap = now;
  };
</script>

</body>
</html>
