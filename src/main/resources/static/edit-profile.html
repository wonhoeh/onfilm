<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>프로필 편집 – OnFilm</title>

    <style>
        :root{
            --bg:#0b0c0f;
            --panel:#12131a;
            --panel-2:#161824;
            --text:#e7e8ee;
            --muted:#9aa0ad;
            --line:rgba(255,255,255,.12);
            --accent:#7c5cff;
            --accent-2:#24d39a;
            --radius-lg:14px;
            --radius-md:10px;
            --shadow:0 10px 40px rgba(0,0,0,.55);
        }

        *{box-sizing:border-box;margin:0;padding:0;}
        body{
            font-family:system-ui,-apple-system,"Noto Sans KR",sans-serif;
            background:
                    radial-gradient(900px 400px at 80% 0%, rgba(124,92,255,.2), transparent 60%),
                    radial-gradient(700px 350px at 10% 10%, rgba(36,211,154,.15), transparent 60%),
                    var(--bg);
            color:var(--text);
        }

        .page-shell{
            min-height:100vh;
            display:flex;
            flex-direction:column;
            align-items:center;
        }

        header{
            width:100%;
            border-bottom:1px solid var(--line);
            background:rgba(11,12,15,.9);
            backdrop-filter:blur(8px);
        }
        .header-inner{
            width:min(1100px,92vw);
            margin:0 auto;
            padding:14px 0;
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap:12px;
        }
        .header-title{
            font-size:16px;
            font-weight:700;
        }
        .back-link{
            font-size:13px;
            color:var(--muted);
            text-decoration:none;
            display:inline-flex;
            align-items:center;
            gap:4px;
        }
        .back-link:hover{
            color:var(--text);
        }

        main{
            flex:1;
            width:min(1100px,92vw);
            margin:0 auto;
            padding:26px 0 40px;
        }

        .edit-card{
            background:var(--panel);
            border-radius:var(--radius-lg);
            border:1px solid var(--line);
            box-shadow:var(--shadow);
            padding:22px 20px 24px;
            display:grid;
            grid-template-columns:260px minmax(0,1fr);
            gap:24px;
        }

        /* 좌측: 프로필 사진 */
        .photo-section{
            border-right:1px solid var(--line);
            padding-right:20px;
            display:flex;
            flex-direction:column;
            align-items:center;
            gap:16px;
        }
        .photo-preview{
            width:210px;
            height:280px;
            border-radius:var(--radius-lg);
            border:1px solid var(--line);
            object-fit:cover;
            background:#050608;
        }
        .photo-hint{
            font-size:12px;
            color:var(--muted);
            text-align:center;
            line-height:1.5;
        }
        .pill-btn{
            display:inline-flex;
            align-items:center;
            justify-content:center;
            gap:6px;
            padding:7px 14px;
            border-radius:999px;
            border:1px solid var(--accent);
            background:rgba(124,92,255,.18);
            color:var(--text);
            font-size:13px;
            cursor:pointer;
            transition:background .15s ease, transform .1s ease;
        }
        .pill-btn:hover{
            background:rgba(124,92,255,.35);
            transform:translateY(-1px);
        }
        .pill-btn input[type="file"]{
            display:none;
        }

        /* 우측: 폼 필드들 */
        .form-section{
            display:flex;
            flex-direction:column;
            gap:18px;
        }

        .field-group{
            display:flex;
            flex-direction:column;
            gap:6px;
        }
        .field-label{
            font-size:13px;
            font-weight:600;
        }
        .field-hint{
            font-size:11px;
            color:var(--muted);
        }

        .text-input,
        .select-input{
            width:100%;
            padding:8px 10px;
            border-radius:8px;
            border:1px solid var(--line);
            background:var(--panel-2);
            color:var(--text);
            font-size:14px;
            outline:none;
        }
        .text-input:focus,
        .select-input:focus{
            border-color:var(--accent);
            box-shadow:0 0 0 1px rgba(124,92,255,.35);
        }

        .two-col{
            display:grid;
            grid-template-columns:repeat(2,minmax(0,1fr));
            gap:12px;
        }

        /* SNS 섹션 */
        .sns-row{
            display:grid;
            grid-template-columns:120px minmax(0,1fr) 32px;
            gap:8px;
            align-items:center;
        }
        .sns-remove-btn{
            width:28px;
            height:28px;
            border-radius:50%;
            border:0;
            background:rgba(255,255,255,.06);
            color:var(--muted);
            cursor:pointer;
            font-size:15px;
            display:flex;
            align-items:center;
            justify-content:center;
        }
        .sns-remove-btn:hover{
            background:rgba(255,80,80,.2);
            color:#ffb3b3;
        }
        .sns-add-btn{
            margin-top:6px;
            font-size:12px;
            padding:5px 10px;
            border-radius:999px;
            border:0;
            background:rgba(255,255,255,.08);
            color:var(--text);
            cursor:pointer;
        }
        .sns-add-btn:hover{
            background:rgba(255,255,255,.16);
        }
        .sns-list{
            display:flex;
            flex-direction:column;
            gap:8px;
            margin-top:4px;
        }

        /* 태그 섹션 */
        .tag-edit-row{
            display:flex;
            gap:6px;
            margin-top:6px;
        }
        .tag-input{
            flex:1;
        }
        .tag-add-btn{
            font-size:12px;
            padding:6px 12px;
            border-radius:999px;
            border:0;
            background:rgba(255,255,255,.08);
            color:var(--text);
            cursor:pointer;
        }
        .tag-add-btn:hover{
            background:rgba(255,255,255,.16);
        }
        .tag-list{
            display:flex;
            flex-wrap:wrap;
            gap:6px;
            margin-top:4px;
        }
        .tag-chip{
            padding:4px 10px;
            border-radius:999px;
            font-size:12px;
            background:rgba(124,92,255,0.18);
            border:1px solid rgba(124,92,255,0.6);
            cursor:pointer;
        }
        .tag-chip:hover{
            background:rgba(124,92,255,0.32);
        }

        /* 하단 버튼 */
        .form-actions{
            margin-top:10px;
            display:flex;
            justify-content:flex-end;
            gap:8px;
        }
        .primary-btn,
        .ghost-btn{
            min-width:90px;
            padding:7px 13px;
            border-radius:999px;
            border:0;
            font-size:13px;
            cursor:pointer;
        }
        .primary-btn{
            background:var(--accent);
            color:white;
        }
        .primary-btn:hover{
            background:#8a6dff;
        }
        .ghost-btn{
            background:transparent;
            color:var(--muted);
            border:1px solid var(--line);
        }
        .ghost-btn:hover{
            border-color:var(--accent);
            color:var(--text);
        }

        footer{
            width:100%;
            border-top:1px solid var(--line);
            padding:18px 0 22px;
            margin-top:auto;
            text-align:center;
            font-size:11px;
            color:var(--muted);
        }

        @media (max-width:800px){
            .edit-card{
                grid-template-columns:1fr;
            }
            .photo-section{
                border-right:none;
                border-bottom:1px solid var(--line);
                padding-right:0;
                padding-bottom:18px;
            }
        }
    </style>
</head>
<body>
<div class="page-shell">
    <header>
        <div class="header-inner">
            <a href="actor-detail-temp.html" class="back-link">
                ← 프로필로 돌아가기
            </a>
            <div class="header-title">프로필 편집</div>
            <div style="width:70px;"></div>
        </div>
    </header>

    <main>
        <section class="edit-card">
            <!-- 왼쪽: 프로필 사진 -->
            <section class="photo-section">
                <img
                        id="profilePreview"
                        class="photo-preview"
                        src="videos/profile-placeholder.png"
                        alt="프로필 사진 미리보기" />

                <label class="pill-btn">
                    사진 선택
                    <input type="file" id="profileFileInput" accept="image/*">
                </label>

                <p class="photo-hint">
                    4:5 비율의 선명한 정면 사진을 권장해요.<br/>
                    (JPG, PNG, 최대 10MB)
                </p>
            </section>

            <!-- 오른쪽: 입력 폼 -->
            <section class="form-section">
                <form id="editProfileForm">
                    <!-- 이름 -->
                    <div class="field-group">
                        <label for="actorName" class="field-label">이름</label>
                        <input id="actorName" class="text-input" type="text" placeholder="예) 이병헌">
                    </div>

                    <!-- 생년월일 + 출생지 -->
                    <div class="two-col">
                        <div class="field-group">
                            <label for="birthDate" class="field-label">출생년도</label>
                            <input
                                    id="birthDate"
                                    class="text-input"
                                    type="date"
                            >
                            <div class="field-hint">YYYY-MM-DD 형식으로 선택하세요.</div>
                        </div>

                        <div class="field-group">
                            <label for="birthPlace" class="field-label">출생</label>
                            <select id="birthPlace" class="select-input">
                                <option value="">선택하세요</option>
                                <option value="서울">서울</option>
                                <option value="인천">인천</option>
                                <option value="부산">부산</option>
                                <option value="대구">대구</option>
                            </select>
                        </div>
                    </div>

                    <!-- SNS 여러 개 -->
                    <div class="field-group">
                        <div class="field-label">SNS 링크</div>
                        <div class="field-hint">
                            인스타그램, 유튜브, 틱톡 등 여러 개를 등록할 수 있어요.
                        </div>

                        <div id="snsList" class="sns-list">
                            <!-- JS로 기본 1개 행 추가 -->
                        </div>

                        <button type="button" id="addSnsBtn" class="sns-add-btn">
                            + SNS 추가
                        </button>
                    </div>

                    <!-- PROFILE TAGS -->
                    <div class="field-group">
                        <div class="field-label">PROFILE TAGS</div>
                        <div class="field-hint">
                            배우의 이미지/강점을 나타내는 키워드를 입력하세요. (예: #아역, #밝은이미지)
                        </div>

                        <div id="tagList" class="tag-list">
                            <!-- 태그 chip들 -->
                        </div>

                        <div class="tag-edit-row">
                            <input
                                    id="tagInput"
                                    class="text-input tag-input"
                                    type="text"
                                    placeholder="#해시태그 입력 후 추가 버튼"
                            >
                            <button type="button" id="addTagBtn" class="tag-add-btn">추가</button>
                        </div>
                        <div class="field-hint">태그를 클릭하면 삭제됩니다.</div>
                    </div>

                    <!-- 하단 버튼 -->
                    <div class="form-actions">
                        <button type="button" class="ghost-btn" onclick="history.back()">취소</button>
                        <button type="submit" class="primary-btn">저장</button>
                    </div>
                </form>
            </section>
        </section>
    </main>

    <footer>
        © 2025 OnFilm · Indie Actor & Film Platform
    </footer>
</div>

<script>
    /* ===== 프로필 사진 미리보기 ===== */
    const profileFileInput = document.getElementById("profileFileInput");
    const profilePreview   = document.getElementById("profilePreview");

    profileFileInput.addEventListener("change", (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = (ev) => {
            profilePreview.src = ev.target.result;
        };
        reader.readAsDataURL(file);
    });

    /* ===== SNS 행 추가/삭제 ===== */
    const snsList   = document.getElementById("snsList");
    const addSnsBtn = document.getElementById("addSnsBtn");

    function createSnsRow(initial = {type:"instagram", url:""}) {
        const row = document.createElement("div");
        row.className = "sns-row";

        const select = document.createElement("select");
        select.className = "select-input";
        select.innerHTML = `
      <option value="instagram">Instagram</option>
      <option value="youtube">YouTube</option>
      <option value="tiktok">TikTok</option>
      <option value="etc">기타</option>
    `;
        select.value = initial.type || "instagram";

        const input = document.createElement("input");
        input.className = "text-input";
        input.type = "url";
        input.placeholder = "https://example.com/...";
        input.value = initial.url || "";

        const removeBtn = document.createElement("button");
        removeBtn.type = "button";
        removeBtn.className = "sns-remove-btn";
        removeBtn.textContent = "✕";
        removeBtn.addEventListener("click", () => {
            snsList.removeChild(row);
            // 최소 1개는 남기고 싶다면 여기에서 체크 로직 추가 가능
            if (snsList.children.length === 0) {
                addSnsRow();
            }
        });

        row.appendChild(select);
        row.appendChild(input);
        row.appendChild(removeBtn);

        snsList.appendChild(row);
    }

    function addSnsRow() {
        createSnsRow({});
    }

    addSnsBtn.addEventListener("click", addSnsRow);

    // 기본 1개 행
    addSnsRow();

    /* ===== TAGS: 추가 / 삭제 ===== */
    const tagListEl = document.getElementById("tagList");
    const tagInput  = document.getElementById("tagInput");
    const addTagBtn = document.getElementById("addTagBtn");

    function addTag(text) {
        const trimmed = text.trim();
        if (!trimmed) return;

        const label = trimmed.startsWith("#") ? trimmed : `#${trimmed}`;

        const chip = document.createElement("span");
        chip.className = "tag-chip";
        chip.textContent = label;
        chip.addEventListener("click", () => {
            tagListEl.removeChild(chip);
        });

        tagListEl.appendChild(chip);
    }

    addTagBtn.addEventListener("click", () => {
        addTag(tagInput.value);
        tagInput.value = "";
        tagInput.focus();
    });

    tagInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
            e.preventDefault();
            addTag(tagInput.value);
            tagInput.value = "";
        }
    });

    // 예시 기본 태그들 (나중에 백엔드 데이터로 채우면 됨)
    ["#아역", "#밝은 이미지", "#광고 친화적"].forEach(addTag);

    /* ===== 폼 submit 핸들러 (현재는 콘솔 로그만) ===== */
    const form = document.getElementById("editProfileForm");

    form.addEventListener("submit", (e) => {
        e.preventDefault();

        // SNS 값 수집
        const snsData = [];
        snsList.querySelectorAll(".sns-row").forEach(row => {
            const type = row.querySelector("select").value;
            const url  = row.querySelector("input").value.trim();
            if (url) {
                snsData.push({ type, url });
            }
        });

        // 태그 값 수집
        const tags = [];
        tagListEl.querySelectorAll(".tag-chip").forEach(chip => {
            tags.push(chip.textContent);
        });

        const payload = {
            name: document.getElementById("actorName").value.trim(),
            birthDate: document.getElementById("birthDate").value,
            birthPlace: document.getElementById("birthPlace").value,
            snsList: snsData,
            tags: tags
            // 사진 파일은 profileFileInput.files[0] 으로 접근 가능
        };

        console.log("프로필 저장 payload:", payload);

        // TODO: 나중에 여기에 fetch로 백엔드 API 호출하면 됨
        // fetch("/api/actors/{id}/profile", { method:"PUT", body:... })
        alert("지금은 프론트 미리보기만 됩니다.\n콘솔에 payload가 출력됐어요.");
    });
</script>
</body>
</html>